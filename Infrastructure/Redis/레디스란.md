
> 출처 : 도서 [개발자를 위한 레디스](http://acornpub.co.kr/book/redis_for_developers)

## 레디스란?
**Remote dictionary server** 의 약자인 레디스(Redis)는 **고성능 키-값 유형의 인메모리 NoSQL 데이터베이스**로, 오픈 소스 기반의 데이터 저장소다.

## 레디스의 특징

### 실시간 응답 (빠른 성능)
- 대부분의 데이터베이스는 온디스크(disk-based) 형태다.
	- 자주 찾는 데이터는 캐싱되어 메모리에 올라가있는 경우도 있지만, 그렇지 않은 데이터를 찾고자 할때에는 직접 디스크에 접근해서 데이터를 검색하는 과정을 거쳐야 한다.
	- 이때 디스크에 저장된 데이터는 바로 찾을 수 없으며, 디스크의 데이터를 페이지 단위로 메모리에 올린 뒤 메모리에서 데이터를 찾고, 없는 경우 다시 다른 페이지를 디스크에서 가져와 메모리에 올린 뒤 찾는 과정을 반복한다.
	- 디스크에 접근하는 것은 기본적으로 메모리에 접근하는 것보다 느리다. 결국, 디스크에 접근하는 빈도가 증가할수록 시스템의 성능은 저하된다.
- 레디스는 **인-메모리** 형태의 데이터베이스이다.
	- 모든 데이터를 컴퓨터의 메모리로 관리한다.
	- 디스크에 접근하는 과정이 없기 때문에 처리성능이 굉장히 빠르다.
### 단순성
- 레디스는 키-값 형태로 관리할 수 있는 데이터 저장소다.
- 키에 매핑되는 값은 문자열 뿐만 아니라 hash, set 등 더욱 복잡하고 다양한 데이터 구조를 저장할 수 있도록 지원한다.
- 이런 데이터 타입은 프로그래밍의 기본 자료 구조와 밀접한 연관이 있어 **추가적인 데이터 가공 없이** 애플리케이션에서 쉽게 사용할 수 있다.
- 레디스는 내장된 다양한 구조를 통해 **임피던스 불일치**를 해소하고, 개발을 편리하게 할 수 있도록 지원한다.
	- **임피던스 불일치** : 기존 관계형 데이터베이스의 테이블과 프로그래밍 언어 간 **데이터 구조, 기능의 차이**로 발생하는 **충돌**을 의미.
- Java, Python, R, Go, JavaScript, Node.js 등 다양한 언어가 지원된다.

#### 특징
- 레디스는 **싱글 스레드**로 동작한다.
	- 정확히 말하자면, **메인 스레드 1개**와 **별도의 스레드 3개**, **총 4개의 스레드**로 동작한다.
- <u>클라이언트의 커맨드를 처리</u>하는 부분은 **이벤트 루프**를 이용한 **싱글 스레드**로 동작한다.
- 최소 하나의 코어만 있어도 레디스를 사용할 수 있다.
	- 배포가 쉽다.
	- CPU가 적은 서버에서도 좋은 성능을 낼 수 있다.
	- 멀티스레드 애플리케이션에서 요구되는 동기화나 Lock 메커니즘 없이도 안정적이고 빠르게 사용자의 요청을 처리 가능하다.

#### 주의할 점
- 레디스는 싱글 스레드로 동작하기 때문에, 한 사용자가 오래 걸리는 커맨드를 수행한다면 다른 사용자는 그만큼 대기해야 할 수밖에 없게 된다.
	- 휴먼 에러 발생 가능성 증가
- 레디스는 메모리에서 동작하기 때문에 대부분의 커맨드는 빠른 응답 시간을 갖지만, 반환이 느린 특정 커맨드가 존재한다. 이런 커맨드만 주의해서 사용해도 장애 가능성을 줄일 수 있으니 알아두는 것이 좋다.

### 고가용성
- 레디스는 자체적으로 **HA(High Availability)** 기능을 제공한다.
	- **고가용성(HA)** : 서버, 네트워크, 프로그램 등의 정보 시스템이 상당히 오랜 기간 동안 지속적으로 정상 운영이 가능한 성질을 말한다. "가용성이 높다"라는 말은, "절대 고장 나지 않음"을 의미한다.
- **복제**를 통해 **데이터를 여러 서버에 분산**시킬 수 있다.
- **센티널(Sentinel)** 은 장애 상황을 탐지해 자동으로 **페일오버(fail-over)** 를 시켜준다.
	- 애플리케이션이 센티널을 이용해 레디스에 연결하는 구조에서는, 마스터에 장애가 발생하더라도 레디스로의 엔드포인트를 변경할 필요 없이 페일오버가 완료되어 정상화된 마스터 노드를 사용할 수 있게 된다.

### 확장성
![[../../../assets/레디스 클러스터 모드.png]]
- 레디스의 **클러스터 모드**를 사용한다면 그림과 같이 손쉬운 **수평적 확장**이 가능해진다.
- 데이터는 레디스 클러스터 내에서 **자동으로 샤딩**된 후 저장되며, 여러개의 복제본이 생성될 수 있다.
	- **샤딩(Sharding)** : 각 DB 서버에 데이터를 분할하여 저장하는 방식.
- <u>이 데이터의 분리는 데이터베이스 레이어에서 처리</u>되며, 애플리케이션에서는 <u>대상 데이터가 어떤 샤드에 있는지 신경쓰지 않아도 되므로,</u> 레디스를 사용할 때와 동일하게 데이터를 가져오고 저장할 수 있다.
- 클러스터 구조에서 모든 레디스 인스턴스는 **클러스터 버스**라는 프로토콜을 이용해 서로 감시하고 있다.
- 이를 이용해 클러스터의 마스터 노드에 문제가 발생하면 자동으로 페일오버를 시켜 고가용성을 유지할 수 있다.

### 클라우드 네이티브 - 멀티 클라우드
- **클라우드 네이티브** : 클라우드 환경에 특화된 애플리케이션의 개발 및 운영 방식을 의미.
	- 이 방식은 마이크로서비스, 컨테이너, 오케스트레이션, 데브옵스와 같은 현대의 개발 및 운영 패러다임을 포용한다.
	- 빠른 배포와 확장성, 높은 복원력을 중심으로 한 애플리케이션을 추구한다.
- 레디스는 이러한 클라우드 네이티브 환경에서 빠른 데이터 엑세스 및 처리를 지원하는 구조로 인해, **마이크로서비스 아키텍쳐와의 연계**에서 큰 장점을 지닌다.
- **멀티 클라우드** : 여러 클라우드 제공업체의 서비스를 동시에 혹은 혼합하여 활용하는 전략을 의미.
	- 이 전략은 단일 클라우드 환경의 장애나 제한된 자원에 대한 의존성을 줄인다.
	- 각 클라우드의 서비스 제공자의 강점을 활용할 수 있게 해준다.
	- 멀티 클라우드를 사용하면 데이터가 특정 지역이나 국가 내에 물리적으로 위치하도록 조절할 수 있어, 더 가까운 저장소에서 데이터를 처리하게 되므로 대기 시간을 줄이고 장애 상황에 더욱 강건하게 대응할 수 있게 된다.
- 레디스는 멀티 클라우드 전략에서 그 중요성을 발휘해, 여러 클라우드 환경에 걸쳐 일관된 성능과 기능을 제공함으로써 **서비스의 연속성**과 **데이터의 일관성**을 보장한다.

#### 국내외 주요 클라우드 벤더들의 레디스 상품
- AWS : Amazon ElastiCache for Redis
- Google Cloud : Cloud Memory store for Redis
- MS Azure : Azure Cache for Redis
- NHN CLOUD : EasyCache
- Naver Cloud Platform : Cloud DB for Redis

