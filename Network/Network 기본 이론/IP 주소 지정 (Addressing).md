
> 참고 블로그 : https://dad-rock.tistory.com/200

## 물리 주소 (Physical Address)
![](../../assets/물리%20주소%20지정%20흐름도.png)

- 하나의 물리 네트워크 내에서 Frame(물리주소를 사용하는 L2의 패킷)이 오고가는 경우이다.  
- [Hub](https://dad-rock.tistory.com/181)는 L1장비로써, 전달할 패킷을 목적지 노드의 위치에 관계없이, **Hub에 연결된 모든 Interface로 송신**하기 때문에 ==**충돌의 위험이 존재**==한다.  
- 각각의 노드에서는 도착한 패킷을 Network Interface Card(Ethernet이 대표적)를 통해 그림처럼 Packet Discarded(패킷 폐기) 혹은 Packet Accepted(패킷 수용) 여부를 선택한다.   
- Frame에서는 다른 계층의 패킷들과는 달리, 목적지 주소(87)을 헤더의 앞에 기재하고, 헤더의 뒤에는 소스 주소(10)를 기재한다.  
- 실제 현장에서는, 그림과 같은 Hub(L1장비)보다는, [Switch](https://dad-rock.tistory.com/181)(L2장비)를 이용한다.
- 물리 주솟값
	- 대부분의 LAN(물리 네트워크)에서의 물리 주소 체계는 6Byte(48bit)로 구성되며, 일반적으로 이 물리 주소를 12 Hexadecimal Digits(12자리 12진수=48bit) 형태로 표기한다.  
	- e.g.) 물리 네트워크 주소의 16진수 표현 vs 2진수 표현
		- 16진수 : 𝟶𝟽:𝟶𝟷:𝟶𝟸:𝟶𝟷:𝟸𝙲:𝟺𝙱
		- 2진수 : 𝟶𝟶𝟶𝟶 𝟶𝟷𝟷𝟷 𝟶𝟶𝟶𝟶 𝟶𝟶𝟶𝟷 𝟶𝟶𝟶𝟶 𝟶𝟶𝟷𝟶 𝟶𝟶𝟶𝟶 𝟶𝟶𝟶𝟷 𝟶𝟶𝟷𝟶 𝟷𝟷𝟶𝟶 𝟶𝟷𝟶𝟶 𝟷𝟶𝟷𝟷

## 논리 주소 (Logical Addres)

![](../../assets/논리%20주소%20지정%20흐름도.png)

- 위 그림에서 수치값은 물리 주소(L2주소), 알파벳 값은 논리 주소(IP주소 = L3주소)이다.
- 각 노드들은 그들의 Interface(경로) 개수만큼의 주소값을 가진다.  
	- (따라서, Router1, 2는 각각 3 Pairs의 주솟값을 가진다.)
	- 3Pairs ? => Router1의 경우
		- LAN1 방향
		- To another network
		- LAN2 방향
- **※ ==물리 주소==는 하나의 물리네트워크를 지날 때 마다(Hop to Hop) 바뀌지만, ==논리 주소==는 출발부터 도착까지 변하지 않는다.**

### 1. Sender -> Router 1 까지의 전송 (LAN1)

1. Sender에서는 [[라우팅 테이블 (Routing Table)]]에서 **목적지 IP주소(P)** 에 대응되는 다음 노드로의 전송을 위한 **Interface 주솟값**과 **NHA 주솟값(F)** 을 얻어온다.
	- **Interface 주솟값** : 다음 노드로 전송하기 위해, 현재 노드의 **어느 인터페이스로 나가야 하는지**를 정해주는 주솟값
	- **NHA(Next-Hopping Address) 주솟값** : 해당 Interface로 나와서, **어느 노드로 가야하는지**를 정해주는 논리 주솟값.
2. **NHA 주솟값(F)** 은 **==ARP 프로토콜==** 을 통해 **다음 노드의 물리 주솟값(20)** 으로 변환된다.
	- ARP(주소 결정 프로토콜) : **네트워크 상에서 ==IP 주소==를 ==물리적 네트워크 주소(MAC 주소)==로 ==대응==시키기 위해 사용되는 프로토콜**
3. **IP-Datagram(A/P)** 에 다음 노드(Router 1)의 물리 주솟값(20)을 포함시켜, LAN1을 건너갈 **Frame(20/10)** 을 만들어 전송시킨다.


## 포트 번호 (Port Number)

- L4(Transport Layer)에서 사용되는 주소 체계이다.

![](../../assets/포트%20번호%20지정%20흐름도.png)

- 위 그림의 `a, b, c, j, k`는 각각 Sender와 Receiver에서 구동중인 프로세스들이다.
- 위 그림에서 주황색 필드(L4)는 ==**포트 번호**==, 노란색 필드(L3)는 ==**IP주소**==, 검은색 헤더(L2)는 ==**물리주소**== 이다.
- **포트 번호**는 하나의 노드가 아닌, 노드에서 구동되는 ==**각각의 프로세스를 구분짓는**== 더욱 세부적인 주솟값이다.
- 인터넷 표준에 의해, L4에서 사용되는 포트 번호는 `unsigned int(16bit)`로 구성되어 있다.
	- **(0 ≤ Port Number ≤ 65,535)**
